<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>forest</title>
<link rel="stylesheet" href="https://use.typekit.net/zsi1mos.css">

<style type="text/css">

	html {
		background-color: black;
	}

	html, body{
			padding: 0;
			margin: 0;
	}

	.container {
		position: relative;
		display: inline-block;
		width: 2.95vw;
		height: 4.7vw;
	}

	.triangle {
		width: auto;
		height: auto;
		vertical-align: middle;
		position: absolute;
		top:50%;
		left:50%;
		transform: translate(-50%, -50%);
		position: absolute;
		z-index: -1;
	}


.container2{
		/*position: relative;
		display: inline-block;
		width: 11.11vw;
		height: 11.11vw;
		*/
		position: absolute;
		top: 0;
		left:0;
		right: 0;
		bottom:0;
		margin-top: auto;
		margin-left: auto;
		margin-right: auto;
		margin-bottom: auto;
		width: 50vw
		height: 50vw;
	}

	.circle{
			width: auto;
			height: auto;
			vertical-align: middle;
			position: absolute;
			top:50%;
			left:50%;
			transform: translate(-50%, -50%);
			position: absolute;
			z-index: -1;
		}

</style>

</head>

<body>

	<div id="wrapper"></div>

<script type="text/javascript">

function randomInt(low, high){
	var random = parseInt(Math.random()*(high-low) + low);
	return random;
}

var border1 = 0;
var border2 = 0;
var borderleft = 0;
var borderright = 0;
var direction = false;

// var timer = 0,  
// 	counter = 0, 
// 	circleDiameter = 0,
// 	direction = false,
// 	totalLength = 200;



for (var i = 0; i < 6039; i++) {

		var container = document.createElement("div");
		container.className = "container";

		var color = "hsl(" + randomInt(95,130) +  "," + randomInt(80,100) + "%" + "," + randomInt(0,20) + "%" + ")";

		if(i % 2 == 0){
			border1 = 5
			border2 = 0
			borderleft = 3
			borderright = 3
			zindex = 1
		}
		else{
			border1 = 0
			border2 = 5
			borderleft = 3
			borderright = 3
			zindex = -1
		}

		if(i % 15 == 0){
			border1 = 0
			border2 = 10
			borderleft = 7
			borderright = 7
			color = "hsl(" + randomInt(95,130) +  "," + randomInt(80,100) + "%" + "," + randomInt(30,80) + "%" + ")";
			zindex = -1
		}else if(i % 22 == 0){
			border1 = 0
			border2 = 7
			borderleft = 5
			borderright = 5
			color = "hsl(" + randomInt(95,130) +  "," + randomInt(80,100) + "%" + "," + randomInt(10,30) + "%" + ")";
			zindex = -1
		}else if(i % 43 == 0){
			border1 = 0
			border2 = 7
			borderleft = 5
			borderright = 5
			color = "hsl(" + randomInt(95,130) +  "," + randomInt(80,100) + "%" + "," + randomInt(30,40) + "%" + ")";
			zindex = -1
		}

		container.innerHTML = `
			<div style="border-left:${borderleft}vw solid transparent; border-right:${borderright}vw solid transparent; border-bottom:${border1}vw solid ${color}; border-top:${border2}vw solid ${color}; z-index: ${zindex}"; class="triangle"></div>
			`				
			
		document.getElementById("wrapper").appendChild(container)

}

var timer = 0, //this incrementally increases with each loop 
				counter = 0, // you will need a counter separate from `i` to increase for each setTimeout (separately from the for loop)
				circleDiameter = 0,
				direction = false,
				totalLength = 100;

for (var j = 0; j < 200; j++) {
			

			setTimeout(function(){ // include the settimeout function

				//creating element
				var container2 = document.createElement("div");
				container2.className = "container2";

					if(counter % 5 == 0){
						if (direction) {
							// if direction is true, change it to false
							direction = false;
						}else{
							// if direction is false, change it to true
							direction = true;
							// circleDiameter = 1;
						}
					}

					//incrementing the diameter
					if(!direction){
						// if direction = false
						circleDiameter--;
					}else{
						// if direction = true
						circleDiameter++;
					}
					// percentage of progress through array
					var progress = counter/(totalLength - 1);
					// producing the individual red and blue values through incrementing to total value of subtraction/addition
					var red = Math.ceil(255 - (progress*255));
					var blue = Math.ceil(progress*255);

					// constructing the color style string
					var color = "rgb(" + red + ", 0, " + blue + ")";
					// percentage for opacity
					var percentage = circleDiameter / 5;

					//template literal with diameter injected as inline css
					container2.innerHTML = `

						<div style=" 
						opacity:${percentage}; 
						width:${circleDiameter*2}vw; 
						height:${circleDiameter*2}vw; border-left: 5vw solid transparent; border-right: 5vw solid transparent; border-top: 7vw solid ${color}; z-index: 1" class="circle"></div>

					`

					var child = document.getElementsByClassName("container2")[0]

					if(child){
						child.remove()
					}
					

					document.getElementById("wrapper").appendChild(container2)

					counter++;

				}, timer)

				timer += 100; //update timer to make sure the next instance happens after this one	
			}


</script>
</body>
</html>